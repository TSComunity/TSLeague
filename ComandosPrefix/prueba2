const { EmbedBuilder, PermissionsBitField, ChannelType } = require("discord.js");

module.exports = {
    name: "ping",
    aliases: ["p", "pong"],
    args: false,
    run: async(message, client, args) => {
        const schema = require('../../Esquemas/SchemaEquipos.js')

        const data = await schema.findOne({ "Jugadores.discordId": interaction.user.id })
        
        const ICONO_DEFECTO = 'https://images-ext-1.discordapp.net/external/93Clk3YKdTqFCB64y3DEwNsEyB2NQwL9VJU5vZFCTXo/%3Fsize%3D128/https/cdn.discordapp.com/icons/1093864130030612521/0525f2dce5dd5a3bff36fdaa833c71c6.png?format=webp&quality=lossless';
        const COLOR_DEFECTO = 0x1bfc62

        let embed
        let components

          embed = new EmbedBuilder()
            .setDescription(`### ${data.Nombre}`)
            .setColor(data.Color ? capitalizar(data.Color) : COLOR_DEFECTO)
            .setThumbnail(data.Icono || ICONO_DEFECTO)
            .addFields(
              { name: '🖼️ Icono', value: data.Icono ? '✅ Personalizado' : '❌ Por defecto', inline: true },
              { name: '🎨 Color', value: data.Color ? `✅ \`${data.Color}\`` : '❌ Por defecto', inline: true },
              { name: '👥 Jugadores', value: 'jugadores', inline: false },
            )
            .setFooter({ name: `Codigo del Equipo: ${data.Codigo}` })

          componentes = [
            new ActionRowBuilder().addComponents(
              new ButtonBuilder()
                .setCustomId('equipo_cambiar_nombre')
                .setLabel('Cambiar Nombre')
                .setEmoji('📛')
                .setStyle(ButtonStyle.Secondary),
              new ButtonBuilder()
                .setCustomId('equipo_cambiar_icono')
                .setLabel('Cambiar Icono')
                .setEmoji('🖼️')
                .setStyle(ButtonStyle.Secondary),
              new ButtonBuilder()
                .setCustomId('equipo_cambiar_color')
                .setLabel('Cambiar Color')
                .setEmoji('🎨')
                .setStyle(ButtonStyle.Secondary),
              new ButtonBuilder()
                .setCustomId('equipo_gestionar_jugadores')
                .setLabel('Gestionar Jugadores')
                .setEmoji('🧑‍💼')
                .setStyle(ButtonStyle.Secondary),
              new ButtonBuilder()
                .setCustomId('equipo_cambiar_codigo')
                .setLabel('Cambiar Código')
                .setEmoji('🔑')
                .setStyle(ButtonStyle.Secondary)
            ),
            new ActionRowBuilder().addComponents(
              new ButtonBuilder()
                .setCustomId('equipo_salir')
                .setLabel('Salir del equipo')
                .setStyle(ButtonStyle.Danger)
                .setEmoji('🚪')
            )
          ]
    }
 }